export const maps = [
    {
        name: "Container Ride",
        mapFile: "sp_a1_intro1",
        thumbnailUrl: "https://wiki.portal2.sr/images/5/50/Map_sp_a1_intro1.jpg",
        chapter: 1,
        iverbId: 62761
    },
    {
        name: "Portal Carousel",
        mapFile: "sp_a1_intro2",
        thumbnailUrl: "https://wiki.portal2.sr/images/6/6c/Map_sp_a1_intro2.jpg",
        chapter: 1,
        iverbId: 62758
    },
    {
        name: "Portal Gun",
        mapFile: "sp_a1_intro3",
        thumbnailUrl: "https://wiki.portal2.sr/images/7/76/Map_sp_a1_intro3.jpg",
        chapter: 1,
        iverbId: 47458
    },
    {
        name: "Smooth Jazz",
        mapFile: "sp_a1_intro4",
        thumbnailUrl: "https://wiki.portal2.sr/images/1/10/Map_sp_a1_intro4.jpg",
        chapter: 1,
        iverbId: 47455
    },
    {
        name: "Cube Momentum",
        mapFile: "sp_a1_intro5",
        thumbnailUrl: "https://wiki.portal2.sr/images/e/e7/Map_sp_a1_intro5.jpg",
        chapter: 1,
        iverbId: 47452
    },
    {
        name: "Future Starter",
        mapFile: "sp_a1_intro6",
        thumbnailUrl: "https://wiki.portal2.sr/images/8/89/Map_sp_a1_intro6.jpg",
        chapter: 1,
        iverbId: 47106
    },
    {
        name: "Secret Panel",
        mapFile: "sp_a1_intro7",
        thumbnailUrl: "https://wiki.portal2.sr/images/e/ed/Map_sp_a1_intro7.jpg",
        chapter: 1,
        iverbId: 62763
    },
    {
        name: "Wakeup",
        mapFile: "sp_a1_wakeup",
        thumbnailUrl: "https://wiki.portal2.sr/images/e/ea/Map_sp_a1_wakeup.jpg",
        chapter: 1,
        iverbId: 62759
    },
    {
        name: "Incinerator",
        mapFile: "sp_a2_intro",
        thumbnailUrl: "https://wiki.portal2.sr/images/7/7e/Map_sp_a2_intro.jpg",
        chapter: 1,
        iverbId: 47735
    },
    {
        name: "Laser Intro",
        mapFile: "sp_a2_laser_intro",
        thumbnailUrl: "https://wiki.portal2.sr/images/1/18/Map_sp_a2_laser_intro.jpg",
        chapter: 2,
        iverbId: 62765
    },
    {
        name: "Laser Stairs",
        mapFile: "sp_a2_laser_stairs",
        thumbnailUrl: "https://wiki.portal2.sr/images/6/66/Map_sp_a2_laser_stairs.jpg",
        chapter: 2,
        iverbId: 47736
    },
    {
        name: "Dual Lasers",
        mapFile: "sp_a2_dual_lasers",
        thumbnailUrl: "https://wiki.portal2.sr/images/2/2d/Map_sp_a2_dual_lasers.jpg",
        chapter: 2,
        iverbId: 47738
    },
    {
        name: "Laser Over Goo",
        mapFile: "sp_a2_laser_over_goo",
        thumbnailUrl: "https://wiki.portal2.sr/images/8/8c/Map_sp_a2_laser_over_goo.jpg",
        chapter: 2,
        iverbId: 47742
    },
    {
        name: "Catapult Intro",
        mapFile: "sp_a2_catapult_intro",
        thumbnailUrl: "https://wiki.portal2.sr/images/5/5b/Map_sp_a2_catapult_intro.jpg",
        chapter: 2,
        iverbId: 62767
    },
    {
        name: "Trust Fling",
        mapFile: "sp_a2_trust_fling",
        thumbnailUrl: "https://wiki.portal2.sr/images/0/0c/Map_sp_a2_trust_fling.jpg",
        chapter: 2,
        iverbId: 47744
    },
    {
        name: "Pit Flings",
        mapFile: "sp_a2_pit_flings",
        thumbnailUrl: "https://wiki.portal2.sr/images/d/dd/Map_sp_a2_pit_flings.jpg",
        chapter: 2,
        iverbId: 47465
    },
    {
        name: "Fizzler Intro",
        mapFile: "sp_a2_fizzler_intro",
        thumbnailUrl: "https://wiki.portal2.sr/images/e/e4/Map_sp_a2_fizzler_intro.jpg",
        chapter: 2,
        iverbId: 47746
    },
    {
        name: "Ceiling Catapult",
        mapFile: "sp_a2_sphere_peek",
        thumbnailUrl: "https://wiki.portal2.sr/images/2/20/Map_sp_a2_sphere_peek.jpg",
        chapter: 3,
        iverbId: 47748
    },
    {
        name: "Ricochet",
        mapFile: "sp_a2_ricochet",
        thumbnailUrl: "https://wiki.portal2.sr/images/f/f6/Map_sp_a2_ricochet.jpg",
        chapter: 3,
        iverbId: 47751
    },
    {
        name: "Bridge Intro",
        mapFile: "sp_a2_bridge_intro",
        thumbnailUrl: "https://wiki.portal2.sr/images/4/45/Map_sp_a2_bridge_intro.jpg",
        chapter: 3,
        iverbId: 47752
    },
    {
        name: "Bridge The Gap",
        mapFile: "sp_a2_bridge_the_gap",
        thumbnailUrl: "https://wiki.portal2.sr/images/c/cb/Map_sp_a2_bridge_the_gap.jpg",
        chapter: 3,
        iverbId: 47755
    },
    {
        name: "Turret Intro",
        mapFile: "sp_a2_turret_intro",
        thumbnailUrl: "https://wiki.portal2.sr/images/f/f3/Map_sp_a2_turret_intro.jpg",
        chapter: 3,
        iverbId: 47756
    },
    {
        name: "Laser Relays",
        mapFile: "sp_a2_laser_relays",
        thumbnailUrl: "https://wiki.portal2.sr/images/8/86/Map_sp_a2_laser_relays.jpg",
        chapter: 3,
        iverbId: 47759
    },
    {
        name: "Turret Blocker",
        mapFile: "sp_a2_turret_blocker",
        thumbnailUrl: "https://wiki.portal2.sr/images/e/eb/Map_sp_a2_turret_blocker.jpg",
        chapter: 3,
        iverbId: 47760
    },
    {
        name: "Laser Vs Turret",
        mapFile: "sp_a2_laser_vs_turret",
        thumbnailUrl: "https://wiki.portal2.sr/images/e/ed/Map_sp_a2_laser_vs_turret.jpg",
        chapter: 3,
        iverbId: 47763
    },
    {
        name: "Pull The Rug",
        mapFile: "sp_a2_pull_the_rug",
        thumbnailUrl: "https://wiki.portal2.sr/images/a/a6/Map_sp_a2_pull_the_rug.jpg",
        chapter: 3,
        iverbId: 47764
    },
    {
        name: "Column Blocker",
        mapFile: "sp_a2_column_blocker",
        thumbnailUrl: "https://wiki.portal2.sr/images/b/bc/Map_sp_a2_column_blocker.jpg",
        chapter: 4,
        iverbId: 47766
    },
    {
        name: "Laser Chaining",
        mapFile: "sp_a2_laser_chaining",
        thumbnailUrl: "https://wiki.portal2.sr/images/5/5f/Map_sp_a2_laser_chaining.jpg",
        chapter: 4,
        iverbId: 47768
    },
    {
        name: "Triple Laser",
        mapFile: "sp_a2_triple_laser",
        thumbnailUrl: "https://wiki.portal2.sr/images/a/ac/Map_sp_a2_triple_laser.jpg",
        chapter: 4,
        iverbId: 47770
    },
    {
        name: "Jail Break",
        mapFile: "sp_a2_bts1",
        thumbnailUrl: "https://wiki.portal2.sr/images/6/6d/Map_sp_a2_bts1.jpg",
        chapter: 4,
        iverbId: 47773
    },
    {
        name: "Escape",
        mapFile: "sp_a2_bts2",
        thumbnailUrl: "https://wiki.portal2.sr/images/8/85/Map_sp_a2_bts2.jpg",
        chapter: 4,
        iverbId: 47774
    },
    {
        name: "Turret Factory",
        mapFile: "sp_a2_bts3",
        thumbnailUrl: "https://wiki.portal2.sr/images/6/6a/Map_sp_a2_bts3.jpg",
        chapter: 5,
        iverbId: 47776
    },
    {
        name: "Turret Sabotage",
        mapFile: "sp_a2_bts4",
        thumbnailUrl: "https://wiki.portal2.sr/images/6/62/Map_sp_a2_bts4.jpg",
        chapter: 5,
        iverbId: 47779
    },
    {
        name: "Neurotoxin Sabotage",
        mapFile: "sp_a2_bts5",
        thumbnailUrl: "https://wiki.portal2.sr/images/9/9d/Map_sp_a2_bts5.jpg",
        chapter: 5,
        iverbId: 47780
    },
    {
        name: "Tube Ride",
        mapFile: "sp_a2_bts6",
        thumbnailUrl: "https://wiki.portal2.sr/images/6/6c/Map_sp_a2_bts6.jpg",
        chapter: 5,
        iverbId: undefined
    },
    {
        name: "Core",
        mapFile: "sp_a2_core",
        thumbnailUrl: "https://wiki.portal2.sr/images/b/b6/Map_sp_a2_core.jpg",
        chapter: 5,
        iverbId: 62771
    },
    {
        name: "Long Fall",
        mapFile: "sp_a3_00",
        thumbnailUrl: "https://wiki.portal2.sr/images/1/1f/Map_sp_a3_00.jpg",
        chapter: 6,
        iverbId: undefined
    },
    {
        name: "Underground",
        mapFile: "sp_a3_01",
        thumbnailUrl: "https://wiki.portal2.sr/images/2/2e/Map_sp_a3_01.jpg",
        chapter: 6,
        iverbId: 47783
    },
    {
        name: "Cave Johnson",
        mapFile: "sp_a3_03",
        thumbnailUrl: "https://wiki.portal2.sr/images/5/56/Map_sp_a3_03.jpg",
        chapter: 6,
        iverbId: 47784
    },
    {
        name: "Repulsion Intro",
        mapFile: "sp_a3_jump_intro",
        thumbnailUrl: "https://wiki.portal2.sr/images/1/15/Map_sp_a3_jump_intro.jpg",
        chapter: 6,
        iverbId: 47787
    },
    {
        name: "Bomb Flings",
        mapFile: "sp_a3_bomb_flings",
        thumbnailUrl: "https://wiki.portal2.sr/images/4/4f/Map_sp_a3_bomb_flings.jpg",
        chapter: 6,
        iverbId: 47468
    },
    {
        name: "Crazy Box",
        mapFile: "sp_a3_crazy_box",
        thumbnailUrl: "https://wiki.portal2.sr/images/e/eb/Map_sp_a3_crazy_box.jpg",
        chapter: 6,
        iverbId: 47469
    },
    {
        name: "PotatOS",
        mapFile: "sp_a3_transition01",
        thumbnailUrl: "https://wiki.portal2.sr/images/2/28/Map_sp_a3_transition01.jpg",
        chapter: 6,
        iverbId: 47472
    },
    {
        name: "Propulsion Intro",
        mapFile: "sp_a3_speed_ramp",
        thumbnailUrl: "https://wiki.portal2.sr/images/f/fd/Map_sp_a3_speed_ramp.jpg",
        chapter: 7,
        iverbId: 47791
    },
    {
        name: "Propulsion Flings",
        mapFile: "sp_a3_speed_flings",
        thumbnailUrl: "https://wiki.portal2.sr/images/f/fc/Map_sp_a3_speed_flings.jpg",
        chapter: 7,
        iverbId: 47793
    },
    {
        name: "Conversion Intro",
        mapFile: "sp_a3_portal_intro",
        thumbnailUrl: "https://wiki.portal2.sr/images/5/5b/Map_sp_a3_portal_intro.jpg",
        chapter: 7,
        iverbId: 47795
    },
    {
        name: "Three Gels",
        mapFile: "sp_a3_end",
        thumbnailUrl: "https://wiki.portal2.sr/images/1/19/Map_sp_a3_end.jpg",
        chapter: 7,
        iverbId: 47798
    },
    {
        name: "Test",
        mapFile: "sp_a4_intro",
        thumbnailUrl: "https://wiki.portal2.sr/images/4/44/Map_sp_a4_intro.jpg",
        chapter: 8,
        iverbId: 88350
    },
    {
        name: "Funnel Intro",
        mapFile: "sp_a4_tb_intro",
        thumbnailUrl: "https://wiki.portal2.sr/images/8/85/Map_sp_a4_tb_intro.jpg",
        chapter: 8,
        iverbId: 47800
    },
    {
        name: "Ceiling Button",
        mapFile: "sp_a4_tb_trust_drop",
        thumbnailUrl: "https://wiki.portal2.sr/images/d/d2/Map_sp_a4_tb_trust_drop.jpg",
        chapter: 8,
        iverbId: 47802
    },
    {
        name: "Wall Button",
        mapFile: "sp_a4_tb_wall_button",
        thumbnailUrl: "https://wiki.portal2.sr/images/3/3e/Map_sp_a4_tb_wall_button.jpg",
        chapter: 8,
        iverbId: 47804
    },
    {
        name: "Polarity",
        mapFile: "sp_a4_tb_polarity",
        thumbnailUrl: "https://wiki.portal2.sr/images/1/13/Map_sp_a4_tb_polarity.jpg",
        chapter: 8,
        iverbId: 47806
    },
    {
        name: "Funnel Catch",
        mapFile: "sp_a4_tb_catch",
        thumbnailUrl: "https://wiki.portal2.sr/images/5/58/Map_sp_a4_tb_catch.jpg",
        chapter: 8,
        iverbId: 47808
    },
    {
        name: "Stop The Box",
        mapFile: "sp_a4_stop_the_box",
        thumbnailUrl: "https://wiki.portal2.sr/images/6/6d/Map_sp_a4_stop_the_box.jpg",
        chapter: 8,
        iverbId: 47811
    },
    {
        name: "Laser Catapult",
        mapFile: "sp_a4_laser_catapult",
        thumbnailUrl: "https://wiki.portal2.sr/images/9/96/Map_sp_a4_laser_catapult.jpg",
        chapter: 8,
        iverbId: 47813
    },
    {
        name: "Laser Platform",
        mapFile: "sp_a4_laser_platform",
        thumbnailUrl: "https://wiki.portal2.sr/images/d/db/Map_sp_a4_laser_platform.jpg",
        chapter: 8,
        iverbId: 47815
    },
    {
        name: "Propulsion Catch",
        mapFile: "sp_a4_speed_tb_catch",
        thumbnailUrl: "https://wiki.portal2.sr/images/8/8b/Map_sp_a4_speed_tb_catch.jpg",
        chapter: 8,
        iverbId: 47817
    },
    {
        name: "Repulsion Polarity",
        mapFile: "sp_a4_jump_polarity",
        thumbnailUrl: "https://wiki.portal2.sr/images/9/9d/Map_sp_a4_jump_polarity.jpg",
        chapter: 8,
        iverbId: 47819
    },
    {
        name: "Finale 1",
        mapFile: "sp_a4_finale1",
        thumbnailUrl: "https://wiki.portal2.sr/images/2/28/Map_sp_a4_finale1.jpg",
        chapter: 9,
        iverbId: 62776
    },
    {
        name: "Finale 2",
        mapFile: "sp_a4_finale2",
        thumbnailUrl: "https://wiki.portal2.sr/images/8/80/Map_sp_a4_finale2.jpg",
        chapter: 9,
        iverbId: 47821,
    },
    {
        name: "Finale 3",
        mapFile: "sp_a4_finale3",
        thumbnailUrl: "https://wiki.portal2.sr/images/c/c7/Map_sp_a4_finale3.jpg",
        chapter: 9,
        iverbId: 47824
    },
    {
        name: "Finale 4",
        mapFile: "sp_a4_finale4",
        thumbnailUrl: "https://wiki.portal2.sr/images/e/eb/Map_sp_a4_finale4.jpg",
        chapter: 9,
        iverbId: 47456
    }
];

export const globalBannedMaps = [
    "Container Ride",
    "Portal Carousel",
    "Secret Panel",
    "Wakeup",
    "Incinerator",
    "Column Blocker",
    "Neurotoxin Sabotage",
    "Tube Ride",
    "Core",
    "Long Fall",
    "Underground",
    "Crazy Box",
    "Test",
    "Stop The Box",
    "Finale 1",
    "Finale 2",
    "Finale 3",
    "Finale 4"
];

export const globalAllowedMaps = maps.filter(m => !globalBannedMaps.includes(m.name));

function formatTime(totalSeconds) {
    if (totalSeconds === undefined) {
        return undefined;
    }

    let minutes = Math.floor(totalSeconds / 60);
    let seconds = totalSeconds % 60;

    if (minutes > 0) {
        if (seconds < 10) {
            return minutes + ':0' + seconds.toFixed(2);
        } else {
            return minutes + ':' + seconds.toFixed(2);
        }
    } else {
        return seconds.toFixed(2);
    }
}

export async function fetchWrs() {
    for (const map of globalAllowedMaps) {
        let response = await (await fetch(`https://board.portal2.sr/chamber/${map.iverbId}/json`)).json();
        let wrScore = response[Object.keys(response)[0]];

        map.wrUser = wrScore.userData.boardname;
        map.wrTime = formatTime(Number(wrScore.scoreData.score) / 100)
        map.wrVideo = `https://autorender.portal2.sr/api/v1/video/${wrScore.scoreData.changelogId}/video`;
    }
}
